###############################################################################
#
# IAR ANSI C/C++ Compiler V7.40.3.8902/W32 for ARM        26/Jul/2016  23:31:20
# Copyright 1999-2015 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Board\src\VCAN_UI_VAR.c
#    Command line =  
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Board\src\VCAN_UI_VAR.c -D
#        DEBUG -D ARM_MATH_CM4 -D MK60DZ10 -lCN
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\DZ10_Debug\List\ -lB
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\DZ10_Debug\List\ -o
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\DZ10_Debug\Obj\
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=None --dlib_config "E:\IAR for
#        ARM\arm\INC\c\DLib_Config_Full.h" -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\App\ -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\App\Inc\ -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Board\Inc\ -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Chip\inc\ -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Chip\inc\IAR\
#        -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Chip\inc\kinetis\
#        -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Lib\CMSIS\Inc\
#        -I D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Lib\FatFs\
#        -I D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Lib\USB\ -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Board\Accessories\
#        -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Board\Accessories\MPU6050\
#        -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Board\Accessories\IMU\
#        -I
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\..\..\Board\Accessories\Driver\
#        -On
#    List file    =  
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\DZ10_Debug\List\VCAN_UI_VAR.lst
#    Object file  =  
#        D:\Study\2016电子设计大赛\Ti\电赛备用底层\Prj\IAR\DZ10_Debug\Obj\VCAN_UI_VAR.o
#
###############################################################################

D:\Study\2016电子设计大赛\Ti\电赛备用底层\Board\src\VCAN_UI_VAR.c
      1          #include "common.h"
      2          #include "VCAN_LCD.h"
      3          #include "VCAN_UI_VAR.h"
      4          #include "VCAN_NRF24L0_MSG.h"
      5          
      6          
      7          
      8          #define VAR_VALUE(var_tab)      num_info[var_tab].val       //指定标号的变量的值
      9          #define VAR_OLDVALUE(var_tab)   num_info[var_tab].oldval    //指定标号的变量的最后确认值
     10          #define VAR_MAXVALUE(var_tab)   num_info[var_tab].maxval
     11          #define VAR_MINVALUE(var_tab)   num_info[var_tab].minval
     12          #define VAR_SITE(var_tab)       num_info[var_tab].site
     13          

   \                                 In section .bss, align 1
     14          static uint8  car_ctrl = CAR_NULL;
   \                     car_ctrl:
   \   00000000                      DS8 1
     15          
     16          extern uint8  var1, var2;
     17          extern uint16 var3, var4;
     18          extern uint32 var5, var6;
     19          

   \                                 In section .data, align 4
     20          uint32 *var_addr[VAR_MAX] = {(uint32 *)&car_ctrl,(uint32 *)&var1, (uint32 *)&var2, (uint32 *)&var3, (uint32 *)&var4, (uint32 *)&var5, (uint32 *)&var6};
   \                     var_addr:
   \   00000000   0x........         DC32 car_ctrl, var1, var2, var3, var4, var5, var6
   \              0x........   
   \              0x........   
   \              0x........   
   \              0x........   
   \              0x........   
   \              0x........   
     21          
     22          

   \                                 In section .data, align 4
     23          ui_var_info_t  num_info[VAR_MAX] =
   \                     num_info:
   \   00000000   0x00000000         DC32 0, 0, 0, 11
   \              0x00000000   
   \              0x00000000   
   \              0x0000000B   
   \   00000010   0x005A 0x0066      DC16 90, 102
   \   00000014   0x00000000         DC32 0, 0, 0, 100
   \              0x00000000   
   \              0x00000000   
   \              0x00000064   
   \   00000024   0x005A 0x0000      DC16 90, 0
   \   00000028   0x00000000         DC32 0, 0, 0, 100
   \              0x00000000   
   \              0x00000000   
   \              0x00000064   
   \   00000038   0x005A 0x0011      DC16 90, 17
   \   0000003C   0x00000000         DC32 0, 0, 0, 300
   \              0x00000000   
   \              0x00000000   
   \              0x0000012C   
   \   0000004C   0x005A 0x0022      DC16 90, 34
   \   00000050   0x00000000         DC32 0, 0, 0, 300
   \              0x00000000   
   \              0x00000000   
   \              0x0000012C   
   \   00000060   0x005A 0x0033      DC16 90, 51
   \   00000064   0x00000000         DC32 0, 0, 0, 65540
   \              0x00000000   
   \              0x00000000   
   \              0x00010004   
   \   00000074   0x005A 0x0044      DC16 90, 68
   \   00000078   0x00000000         DC32 0, 0, 0, 65540
   \              0x00000000   
   \              0x00000000   
   \              0x00010004   
   \   00000088   0x005A 0x0055      DC16 90, 85
     24          {
     25              //  {val,oldval,minval,maxval,{x,y}}
     26              //val,oldval,会在调用key_event_init的时候从其对应变量里赋值过来，所以这里的值可以随意写
     27              //需要设置minval,maxval,{x,y}
     28              //务必注意最小值不要大于最大值
     29              {0, 0, 0, CAR_CTRL_MAX, {90,102}},      //变量 car_ctrl，
     30              {0, 0, 0, 100, {90, 0}},                //变量 var1，
     31              {0, 0, 0, 100, {90, 17}},               //变量 var2，
     32              {0, 0, 0, 300, {90, 34}},               //变量 var3，
     33              {0, 0, 0, 300, {90, 51}},               //变量 var4，
     34              {0, 0, 0, 65540, {90, 68}},             //变量 var5，
     35              {0, 0, 0, 65540, {90, 85}}              //变量 var6，
     36          };
     37          

   \                                 In section .bss, align 1
     38          uint8   new_tab = 0;        //当前选择的变量编号
   \                     new_tab:
   \   00000000                      DS8 1

   \                                 In section .bss, align 4
     39          uint32  last_tab;           //最后接收到的变量编号
   \                     last_tab:
   \   00000000                      DS8 4
     40          
     41          
     42          
     43          //同步指定的值。tab 为 VAR_NUM 时表示全部同步，小于则同步对应的
     44          //必须先同步再显示全部，因为有可能同步失败。
     45          //static uint8 var_syn(uint8 tab);         //同步数据，1表示成功，0表示失败
     46          
     47          void save_var2buff(var_tab_e var_num, uint8 *sendbuf);              //把需要发送的变量的数据写入到缓冲区
     48          

   \                                 In section .text, align 2, keep-with-next
     49          void var_init()
     50          {
   \                     var_init: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
     51              uint8   var_num;
     52              uint32  vartemp;
     53          
     54              for(var_num = 0; var_num < VAR_MAX; var_num++)
   \   00000004   0x2000             MOVS     R0,#+0
   \   00000006   0x0004             MOVS     R4,R0
   \                     ??var_init_0: (+1)
   \   00000008   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000000A   0x2C07             CMP      R4,#+7
   \   0000000C   0xDA2B             BGE.N    ??var_init_1
     55              {
     56                  get_var((var_tab_e)var_num, &vartemp);
   \   0000000E   0xA900             ADD      R1,SP,#+0
   \   00000010   0x0020             MOVS     R0,R4
   \   00000012   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000014   0x.... 0x....      BL       get_var
     57                  num_info[var_num].val       = vartemp;
   \   00000018   0x9800             LDR      R0,[SP, #+0]
   \   0000001A   0x.... 0x....      LDR.W    R1,??DataTable11
   \   0000001E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000020   0x2214             MOVS     R2,#+20
   \   00000022   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   00000026   0x6008             STR      R0,[R1, #+0]
     58                  num_info[var_num].oldval    = vartemp;
   \   00000028   0x9800             LDR      R0,[SP, #+0]
   \   0000002A   0x.... 0x....      LDR.W    R1,??DataTable11
   \   0000002E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000030   0x2214             MOVS     R2,#+20
   \   00000032   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   00000036   0x6048             STR      R0,[R1, #+4]
     59          
     60                  //检测最小值与最大值
     61                  ASSERT(num_info[var_num].maxval  >=  num_info[var_num].minval );
   \   00000038   0x.... 0x....      LDR.W    R0,??DataTable11
   \   0000003C   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000003E   0x2114             MOVS     R1,#+20
   \   00000040   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   00000044   0x68C0             LDR      R0,[R0, #+12]
   \   00000046   0x.... 0x....      LDR.W    R1,??DataTable11
   \   0000004A   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000004C   0x2214             MOVS     R2,#+20
   \   0000004E   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   00000052   0x6889             LDR      R1,[R1, #+8]
   \   00000054   0x4288             CMP      R0,R1
   \   00000056   0xD204             BCS.N    ??var_init_2
   \   00000058   0x213D             MOVS     R1,#+61
   \   0000005A   0x.... 0x....      LDR.W    R0,??DataTable11_1
   \   0000005E   0x.... 0x....      BL       assert_failed
     62              }
   \                     ??var_init_2: (+1)
   \   00000062   0x1C64             ADDS     R4,R4,#+1
   \   00000064   0xE7D0             B.N      ??var_init_0
     63          }
   \                     ??var_init_1: (+1)
   \   00000066   0xBD13             POP      {R0,R1,R4,PC}    ;; return
     64          

   \                                 In section .text, align 2, keep-with-next
     65          void save_var(var_tab_e var_tal, uint32 var_data)
     66          {
     67              if(var_tal <= VAR_8BIT)
   \                     save_var: (+1)
   \   00000000   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000002   0x2803             CMP      R0,#+3
   \   00000004   0xDA06             BGE.N    ??save_var_0
     68              {
     69                  *((uint8 *)(var_addr[var_tal])) = var_data;
   \   00000006   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   0000000A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000C   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000010   0x7011             STRB     R1,[R2, #+0]
   \   00000012   0xE012             B.N      ??save_var_1
     70              }
     71              else if(var_tal <= VAR_16BIT)
   \                     ??save_var_0: (+1)
   \   00000014   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000016   0x2805             CMP      R0,#+5
   \   00000018   0xDA06             BGE.N    ??save_var_2
     72              {
     73                  *((uint16 *)(var_addr[var_tal])) = var_data;
   \   0000001A   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   0000001E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000020   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000024   0x8011             STRH     R1,[R2, #+0]
   \   00000026   0xE008             B.N      ??save_var_1
     74              }
     75              else if(var_tal <= VAR_32BIT)
   \                     ??save_var_2: (+1)
   \   00000028   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000002A   0x2807             CMP      R0,#+7
   \   0000002C   0xDA05             BGE.N    ??save_var_1
     76              {
     77                  *((uint32 *)(var_addr[var_tal])) = var_data;
   \   0000002E   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   00000032   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000034   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000038   0x6011             STR      R1,[R2, #+0]
     78              }
     79          
     80              VAR_VALUE(var_tal) = var_data;
   \                     ??save_var_1: (+1)
   \   0000003A   0x.... 0x....      LDR.W    R2,??DataTable11
   \   0000003E   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000040   0x2314             MOVS     R3,#+20
   \   00000042   0xFB03 0x2200      MLA      R2,R3,R0,R2
   \   00000046   0x6011             STR      R1,[R2, #+0]
     81              VAR_OLDVALUE(var_tal) = var_data;
   \   00000048   0x.... 0x....      LDR.W    R2,??DataTable11
   \   0000004C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000004E   0x2314             MOVS     R3,#+20
   \   00000050   0xFB03 0x2200      MLA      R2,R3,R0,R2
   \   00000054   0x6051             STR      R1,[R2, #+4]
     82          }
   \   00000056   0x4770             BX       LR               ;; return
     83          

   \                                 In section .text, align 2, keep-with-next
     84          void get_var(var_tab_e var_tal, uint32 *var_data)
     85          {
     86              if(var_tal <= VAR_8BIT)
   \                     get_var: (+1)
   \   00000000   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000002   0x2803             CMP      R0,#+3
   \   00000004   0xDA07             BGE.N    ??get_var_0
     87              {
     88                  *var_data = (uint32) * ((uint8 *)(var_addr[var_tal]));
   \   00000006   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   0000000A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000C   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000010   0x7812             LDRB     R2,[R2, #+0]
   \   00000012   0x600A             STR      R2,[R1, #+0]
   \   00000014   0xE014             B.N      ??get_var_1
     89              }
     90              else if(var_tal <= VAR_16BIT)
   \                     ??get_var_0: (+1)
   \   00000016   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000018   0x2805             CMP      R0,#+5
   \   0000001A   0xDA07             BGE.N    ??get_var_2
     91              {
     92                  *var_data = (uint32) * ((uint16 *)(var_addr[var_tal])) ;
   \   0000001C   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   00000020   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000022   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   00000026   0x8812             LDRH     R2,[R2, #+0]
   \   00000028   0x600A             STR      R2,[R1, #+0]
   \   0000002A   0xE009             B.N      ??get_var_1
     93              }
     94              else if(var_tal <= VAR_32BIT)
   \                     ??get_var_2: (+1)
   \   0000002C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000002E   0x2807             CMP      R0,#+7
   \   00000030   0xDA06             BGE.N    ??get_var_1
     95              {
     96                  *var_data = (uint32) * ((uint32 *)(var_addr[var_tal]));
   \   00000032   0x.... 0x....      LDR.W    R2,??DataTable11_2
   \   00000036   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000038   0xF852 0x2020      LDR      R2,[R2, R0, LSL #+2]
   \   0000003C   0x6812             LDR      R2,[R2, #+0]
   \   0000003E   0x600A             STR      R2,[R1, #+0]
     97              }
     98          }
   \                     ??get_var_1: (+1)
   \   00000040   0x4770             BX       LR               ;; return
     99          
    100          

   \                                 In section .text, align 2, keep-with-next
    101          void updata_var(var_tab_e var_tal)
    102          {
   \                     updata_var: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0xB082             SUB      SP,SP,#+8
   \   00000004   0x0004             MOVS     R4,R0
    103              uint32 vartemp;
    104          
    105              get_var(var_tal, &vartemp);
   \   00000006   0xA900             ADD      R1,SP,#+0
   \   00000008   0x0020             MOVS     R0,R4
   \   0000000A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000C   0x.... 0x....      BL       get_var
    106          
    107              VAR_VALUE(var_tal) = vartemp;
   \   00000010   0x9800             LDR      R0,[SP, #+0]
   \   00000012   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000016   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000018   0x2214             MOVS     R2,#+20
   \   0000001A   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   0000001E   0x6008             STR      R0,[R1, #+0]
    108          }
   \   00000020   0xBD13             POP      {R0,R1,R4,PC}    ;; return
    109          
    110          //对变量的加减进行处理

   \                                 In section .text, align 2, keep-with-next
    111          void var_value(ui_var_event_e ctrl)
    112          {
   \                     var_value: (+1)
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    113              ASSERT(new_tab < VAR_MAX);
   \   00000004   0x.... 0x....      LDR.W    R0,??DataTable11_3
   \   00000008   0x7800             LDRB     R0,[R0, #+0]
   \   0000000A   0x2807             CMP      R0,#+7
   \   0000000C   0xDB04             BLT.N    ??var_value_0
   \   0000000E   0x2171             MOVS     R1,#+113
   \   00000010   0x.... 0x....      LDR.W    R0,??DataTable11_1
   \   00000014   0x.... 0x....      BL       assert_failed
    114          
    115          
    116              //修改当前变量的值
    117              switch(ctrl)
   \                     ??var_value_0: (+1)
   \   00000018   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000001A   0x2C04             CMP      R4,#+4
   \   0000001C   0xD008             BEQ.N    ??var_value_1
   \   0000001E   0xF0C0 0x80EF      BCC.W    ??var_value_2
   \   00000022   0x2C06             CMP      R4,#+6
   \   00000024   0xD07A             BEQ.N    ??var_value_3
   \   00000026   0xD33E             BCC.N    ??var_value_4
   \   00000028   0x2C07             CMP      R4,#+7
   \   0000002A   0xF000 0x80B3      BEQ.W    ??var_value_5
   \   0000002E   0xE0E7             B.N      ??var_value_2
    118              {
    119              case VAR_ADD:
    120                  if(VAR_VALUE(new_tab) < VAR_MAXVALUE(new_tab))
   \                     ??var_value_1: (+1)
   \   00000030   0x.... 0x....      LDR.W    R0,??DataTable11
   \   00000034   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   00000038   0x7809             LDRB     R1,[R1, #+0]
   \   0000003A   0x2214             MOVS     R2,#+20
   \   0000003C   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   00000040   0x6800             LDR      R0,[R0, #+0]
   \   00000042   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000046   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   0000004A   0x7812             LDRB     R2,[R2, #+0]
   \   0000004C   0x2314             MOVS     R3,#+20
   \   0000004E   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   00000052   0x68C9             LDR      R1,[R1, #+12]
   \   00000054   0x4288             CMP      R0,R1
   \   00000056   0xD213             BCS.N    ??var_value_6
    121                  {
    122                      VAR_VALUE(new_tab)++;
   \   00000058   0x.... 0x....      LDR.W    R0,??DataTable11
   \   0000005C   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   00000060   0x7809             LDRB     R1,[R1, #+0]
   \   00000062   0x2214             MOVS     R2,#+20
   \   00000064   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   00000068   0x6800             LDR      R0,[R0, #+0]
   \   0000006A   0x1C40             ADDS     R0,R0,#+1
   \   0000006C   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000070   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   00000074   0x7812             LDRB     R2,[R2, #+0]
   \   00000076   0x2314             MOVS     R3,#+20
   \   00000078   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   0000007C   0x6008             STR      R0,[R1, #+0]
   \   0000007E   0xE011             B.N      ??var_value_7
    123                  }
    124                  else
    125                  {
    126                      VAR_VALUE(new_tab) = VAR_MINVALUE(new_tab);
   \                     ??var_value_6: (+1)
   \   00000080   0x.... 0x....      LDR.W    R0,??DataTable11
   \   00000084   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   00000088   0x7809             LDRB     R1,[R1, #+0]
   \   0000008A   0x2214             MOVS     R2,#+20
   \   0000008C   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   00000090   0x6880             LDR      R0,[R0, #+8]
   \   00000092   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000096   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   0000009A   0x7812             LDRB     R2,[R2, #+0]
   \   0000009C   0x2314             MOVS     R3,#+20
   \   0000009E   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000000A2   0x6008             STR      R0,[R1, #+0]
    127                  }
    128                  break;
   \                     ??var_value_7: (+1)
   \   000000A4   0xE0AC             B.N      ??var_value_8
    129          
    130              case VAR_SUB:
    131                  if(VAR_VALUE(new_tab) > VAR_MINVALUE(new_tab))
   \                     ??var_value_4: (+1)
   \   000000A6   0x.... 0x....      LDR.W    R0,??DataTable11
   \   000000AA   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   000000AE   0x7809             LDRB     R1,[R1, #+0]
   \   000000B0   0x2214             MOVS     R2,#+20
   \   000000B2   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   000000B6   0x6880             LDR      R0,[R0, #+8]
   \   000000B8   0x.... 0x....      LDR.W    R1,??DataTable11
   \   000000BC   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   000000C0   0x7812             LDRB     R2,[R2, #+0]
   \   000000C2   0x2314             MOVS     R3,#+20
   \   000000C4   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000000C8   0x6809             LDR      R1,[R1, #+0]
   \   000000CA   0x4288             CMP      R0,R1
   \   000000CC   0xD213             BCS.N    ??var_value_9
    132                  {
    133                      VAR_VALUE(new_tab)--;
   \   000000CE   0x.... 0x....      LDR.W    R0,??DataTable11
   \   000000D2   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   000000D6   0x7809             LDRB     R1,[R1, #+0]
   \   000000D8   0x2214             MOVS     R2,#+20
   \   000000DA   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   000000DE   0x6800             LDR      R0,[R0, #+0]
   \   000000E0   0x1E40             SUBS     R0,R0,#+1
   \   000000E2   0x.... 0x....      LDR.W    R1,??DataTable11
   \   000000E6   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   000000EA   0x7812             LDRB     R2,[R2, #+0]
   \   000000EC   0x2314             MOVS     R3,#+20
   \   000000EE   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000000F2   0x6008             STR      R0,[R1, #+0]
   \   000000F4   0xE011             B.N      ??var_value_10
    134                  }
    135                  else
    136                  {
    137                      VAR_VALUE(new_tab) = VAR_MAXVALUE(new_tab) ;//最小值减一为最大值
   \                     ??var_value_9: (+1)
   \   000000F6   0x.... 0x....      LDR.W    R0,??DataTable11
   \   000000FA   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   000000FE   0x7809             LDRB     R1,[R1, #+0]
   \   00000100   0x2214             MOVS     R2,#+20
   \   00000102   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   00000106   0x68C0             LDR      R0,[R0, #+12]
   \   00000108   0x.... 0x....      LDR.W    R1,??DataTable11
   \   0000010C   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   00000110   0x7812             LDRB     R2,[R2, #+0]
   \   00000112   0x2314             MOVS     R3,#+20
   \   00000114   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   00000118   0x6008             STR      R0,[R1, #+0]
    138                  }
    139                  break;
   \                     ??var_value_10: (+1)
   \   0000011A   0xE071             B.N      ??var_value_8
    140          
    141              case VAR_ADD_HOLD:
    142                  if(   (VAR_MAXVALUE(new_tab) - VAR_VALUE(new_tab))  >  VAR_VALUE_HOLE_OFFSET )
   \                     ??var_value_3: (+1)
   \   0000011C   0x.... 0x....      LDR.W    R0,??DataTable11
   \   00000120   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   00000124   0x7809             LDRB     R1,[R1, #+0]
   \   00000126   0x2214             MOVS     R2,#+20
   \   00000128   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   0000012C   0x68C0             LDR      R0,[R0, #+12]
   \   0000012E   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000132   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   00000136   0x7812             LDRB     R2,[R2, #+0]
   \   00000138   0x2314             MOVS     R3,#+20
   \   0000013A   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   0000013E   0x6809             LDR      R1,[R1, #+0]
   \   00000140   0x1A40             SUBS     R0,R0,R1
   \   00000142   0x280B             CMP      R0,#+11
   \   00000144   0xD313             BCC.N    ??var_value_11
    143                  {
    144                      VAR_VALUE(new_tab) += VAR_VALUE_HOLE_OFFSET;
   \   00000146   0x.... 0x....      LDR.W    R0,??DataTable11
   \   0000014A   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   0000014E   0x7809             LDRB     R1,[R1, #+0]
   \   00000150   0x2214             MOVS     R2,#+20
   \   00000152   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   00000156   0x6800             LDR      R0,[R0, #+0]
   \   00000158   0x300A             ADDS     R0,R0,#+10
   \   0000015A   0x.... 0x....      LDR.W    R1,??DataTable11
   \   0000015E   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   00000162   0x7812             LDRB     R2,[R2, #+0]
   \   00000164   0x2314             MOVS     R3,#+20
   \   00000166   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   0000016A   0x6008             STR      R0,[R1, #+0]
   \   0000016C   0xE011             B.N      ??var_value_12
    145                  }
    146                  else
    147                  {
    148                      VAR_VALUE(new_tab) = VAR_MINVALUE(new_tab);
   \                     ??var_value_11: (+1)
   \   0000016E   0x.... 0x....      LDR.W    R0,??DataTable11
   \   00000172   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   00000176   0x7809             LDRB     R1,[R1, #+0]
   \   00000178   0x2214             MOVS     R2,#+20
   \   0000017A   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   0000017E   0x6880             LDR      R0,[R0, #+8]
   \   00000180   0x.... 0x....      LDR.W    R1,??DataTable11
   \   00000184   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   00000188   0x7812             LDRB     R2,[R2, #+0]
   \   0000018A   0x2314             MOVS     R3,#+20
   \   0000018C   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   00000190   0x6008             STR      R0,[R1, #+0]
    149                  }
    150                  break;
   \                     ??var_value_12: (+1)
   \   00000192   0xE035             B.N      ??var_value_8
    151          
    152              case VAR_SUB_HOLD:
    153                  if( ( VAR_VALUE(new_tab) - VAR_MINVALUE(new_tab)) > VAR_VALUE_HOLE_OFFSET  )
   \                     ??var_value_5: (+1)
   \   00000194   0x.... 0x....      LDR.W    R0,??DataTable11
   \   00000198   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   0000019C   0x7809             LDRB     R1,[R1, #+0]
   \   0000019E   0x2214             MOVS     R2,#+20
   \   000001A0   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   000001A4   0x6800             LDR      R0,[R0, #+0]
   \   000001A6   0x.... 0x....      LDR.W    R1,??DataTable11
   \   000001AA   0x.... 0x....      LDR.W    R2,??DataTable11_3
   \   000001AE   0x7812             LDRB     R2,[R2, #+0]
   \   000001B0   0x2314             MOVS     R3,#+20
   \   000001B2   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000001B6   0x6889             LDR      R1,[R1, #+8]
   \   000001B8   0x1A40             SUBS     R0,R0,R1
   \   000001BA   0x280B             CMP      R0,#+11
   \   000001BC   0xD311             BCC.N    ??var_value_13
    154                  {
    155                      VAR_VALUE(new_tab) -= VAR_VALUE_HOLE_OFFSET;
   \   000001BE   0x.... 0x....      LDR.W    R0,??DataTable11
   \   000001C2   0x.... 0x....      LDR.W    R1,??DataTable11_3
   \   000001C6   0x7809             LDRB     R1,[R1, #+0]
   \   000001C8   0x2214             MOVS     R2,#+20
   \   000001CA   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   000001CE   0x6800             LDR      R0,[R0, #+0]
   \   000001D0   0x380A             SUBS     R0,R0,#+10
   \   000001D2   0x....             LDR.N    R1,??DataTable11
   \   000001D4   0x....             LDR.N    R2,??DataTable11_3
   \   000001D6   0x7812             LDRB     R2,[R2, #+0]
   \   000001D8   0x2314             MOVS     R3,#+20
   \   000001DA   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000001DE   0x6008             STR      R0,[R1, #+0]
   \   000001E0   0xE00D             B.N      ??var_value_14
    156                  }
    157                  else
    158                  {
    159                      VAR_VALUE(new_tab) = VAR_MAXVALUE(new_tab) ;//最小值减一为最大值
   \                     ??var_value_13: (+1)
   \   000001E2   0x....             LDR.N    R0,??DataTable11
   \   000001E4   0x....             LDR.N    R1,??DataTable11_3
   \   000001E6   0x7809             LDRB     R1,[R1, #+0]
   \   000001E8   0x2214             MOVS     R2,#+20
   \   000001EA   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   000001EE   0x68C0             LDR      R0,[R0, #+12]
   \   000001F0   0x....             LDR.N    R1,??DataTable11
   \   000001F2   0x....             LDR.N    R2,??DataTable11_3
   \   000001F4   0x7812             LDRB     R2,[R2, #+0]
   \   000001F6   0x2314             MOVS     R3,#+20
   \   000001F8   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   000001FC   0x6008             STR      R0,[R1, #+0]
    160                  }
    161                  break;
   \                     ??var_value_14: (+1)
   \   000001FE   0xE7FF             B.N      ??var_value_8
    162          
    163              default:                        //无效选择，不需要切换
    164                  break;
    165              }
    166          
    167              var_display(new_tab);
   \                     ??var_value_2: (+1)
   \                     ??var_value_8: (+1)
   \   00000200   0x....             LDR.N    R0,??DataTable11_3
   \   00000202   0x7800             LDRB     R0,[R0, #+0]
   \   00000204   0x.... 0x....      BL       var_display
    168          }
   \   00000208   0xBD10             POP      {R4,PC}          ;; return
    169          
    170          //对变量进行选择

   \                                 In section .text, align 2, keep-with-next
    171          void var_select(ui_var_event_e  ctrl)
    172          {
   \                     var_select: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    173              ASSERT(new_tab < VAR_MAX);
   \   00000004   0x....             LDR.N    R0,??DataTable11_3
   \   00000006   0x7800             LDRB     R0,[R0, #+0]
   \   00000008   0x2807             CMP      R0,#+7
   \   0000000A   0xDB03             BLT.N    ??var_select_0
   \   0000000C   0x21AD             MOVS     R1,#+173
   \   0000000E   0x....             LDR.N    R0,??DataTable11_1
   \   00000010   0x.... 0x....      BL       assert_failed
    174          
    175              uint8 old_tab = new_tab;       //先备份当前变量标号
   \                     ??var_select_0: (+1)
   \   00000014   0x....             LDR.N    R0,??DataTable11_3
   \   00000016   0x7805             LDRB     R5,[R0, #+0]
    176          
    177              //切换到下一个变量
    178              switch(ctrl)
   \   00000018   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000001A   0x2C00             CMP      R4,#+0
   \   0000001C   0xD005             BEQ.N    ??var_select_1
   \   0000001E   0x2C02             CMP      R4,#+2
   \   00000020   0xD01D             BEQ.N    ??var_select_2
   \   00000022   0xD30F             BCC.N    ??var_select_3
   \   00000024   0x2C03             CMP      R4,#+3
   \   00000026   0xD027             BEQ.N    ??var_select_4
   \   00000028   0xE033             B.N      ??var_select_5
    179              {
    180              case VAR_NEXT:                      //下一个
    181                  new_tab++;
   \                     ??var_select_1: (+1)
   \   0000002A   0x....             LDR.N    R0,??DataTable11_3
   \   0000002C   0x7800             LDRB     R0,[R0, #+0]
   \   0000002E   0x1C40             ADDS     R0,R0,#+1
   \   00000030   0x....             LDR.N    R1,??DataTable11_3
   \   00000032   0x7008             STRB     R0,[R1, #+0]
    182                  if(new_tab >= (VAR_MAX) )
   \   00000034   0x....             LDR.N    R0,??DataTable11_3
   \   00000036   0x7800             LDRB     R0,[R0, #+0]
   \   00000038   0x2807             CMP      R0,#+7
   \   0000003A   0xDB02             BLT.N    ??var_select_6
    183                  {
    184                      new_tab = 0;               //从头开始
   \   0000003C   0x2000             MOVS     R0,#+0
   \   0000003E   0x....             LDR.N    R1,??DataTable11_3
   \   00000040   0x7008             STRB     R0,[R1, #+0]
    185                  }
    186                  break;
   \                     ??var_select_6: (+1)
   \   00000042   0xE027             B.N      ??var_select_7
    187          
    188              case VAR_PREV:                      //上一个
    189                  new_tab--;
   \                     ??var_select_3: (+1)
   \   00000044   0x....             LDR.N    R0,??DataTable11_3
   \   00000046   0x7800             LDRB     R0,[R0, #+0]
   \   00000048   0x1E40             SUBS     R0,R0,#+1
   \   0000004A   0x....             LDR.N    R1,??DataTable11_3
   \   0000004C   0x7008             STRB     R0,[R1, #+0]
    190                  if(new_tab >= (VAR_MAX) )
   \   0000004E   0x....             LDR.N    R0,??DataTable11_3
   \   00000050   0x7800             LDRB     R0,[R0, #+0]
   \   00000052   0x2807             CMP      R0,#+7
   \   00000054   0xDB02             BLT.N    ??var_select_8
    191                  {
    192                      new_tab = VAR_MAX - 1;     //从尾开始
   \   00000056   0x2006             MOVS     R0,#+6
   \   00000058   0x....             LDR.N    R1,??DataTable11_3
   \   0000005A   0x7008             STRB     R0,[R1, #+0]
    193                  }
    194                  break;
   \                     ??var_select_8: (+1)
   \   0000005C   0xE01A             B.N      ??var_select_7
    195          
    196              case VAR_NEXT_HOLD:                 //快下
    197                  new_tab += VAR_SELECT_HOLD_OFFSET;
   \                     ??var_select_2: (+1)
   \   0000005E   0x....             LDR.N    R0,??DataTable11_3
   \   00000060   0x7800             LDRB     R0,[R0, #+0]
   \   00000062   0x1C80             ADDS     R0,R0,#+2
   \   00000064   0x....             LDR.N    R1,??DataTable11_3
   \   00000066   0x7008             STRB     R0,[R1, #+0]
    198                  if(new_tab >= (VAR_MAX) )
   \   00000068   0x....             LDR.N    R0,??DataTable11_3
   \   0000006A   0x7800             LDRB     R0,[R0, #+0]
   \   0000006C   0x2807             CMP      R0,#+7
   \   0000006E   0xDB02             BLT.N    ??var_select_9
    199                  {
    200                      new_tab = 0;               //从头开始
   \   00000070   0x2000             MOVS     R0,#+0
   \   00000072   0x....             LDR.N    R1,??DataTable11_3
   \   00000074   0x7008             STRB     R0,[R1, #+0]
    201                  }
    202                  break;
   \                     ??var_select_9: (+1)
   \   00000076   0xE00D             B.N      ??var_select_7
    203          
    204              case VAR_PREV_HOLD:                 //快上
    205                  new_tab -= VAR_SELECT_HOLD_OFFSET;
   \                     ??var_select_4: (+1)
   \   00000078   0x....             LDR.N    R0,??DataTable11_3
   \   0000007A   0x7800             LDRB     R0,[R0, #+0]
   \   0000007C   0x1E80             SUBS     R0,R0,#+2
   \   0000007E   0x....             LDR.N    R1,??DataTable11_3
   \   00000080   0x7008             STRB     R0,[R1, #+0]
    206                  if(new_tab >= (VAR_MAX) )
   \   00000082   0x....             LDR.N    R0,??DataTable11_3
   \   00000084   0x7800             LDRB     R0,[R0, #+0]
   \   00000086   0x2807             CMP      R0,#+7
   \   00000088   0xDB02             BLT.N    ??var_select_10
    207                  {
    208                      new_tab = VAR_MAX - 1;     //从尾开始
   \   0000008A   0x2006             MOVS     R0,#+6
   \   0000008C   0x....             LDR.N    R1,??DataTable11_3
   \   0000008E   0x7008             STRB     R0,[R1, #+0]
    209                  }
    210                  break;
   \                     ??var_select_10: (+1)
   \   00000090   0xE000             B.N      ??var_select_7
    211          
    212              default:                        //无效选择，不需要切换
    213                  return;
   \                     ??var_select_5: (+1)
   \   00000092   0xE007             B.N      ??var_select_11
    214              }
    215          
    216              var_display(old_tab);               //处理上一个变量
   \                     ??var_select_7: (+1)
   \   00000094   0x0028             MOVS     R0,R5
   \   00000096   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000098   0x.... 0x....      BL       var_display
    217          
    218              var_display(new_tab);              //处理当前变量：
   \   0000009C   0x....             LDR.N    R0,??DataTable11_3
   \   0000009E   0x7800             LDRB     R0,[R0, #+0]
   \   000000A0   0x.... 0x....      BL       var_display
    219          
    220          }
   \                     ??var_select_11: (+1)
   \   000000A4   0xBD31             POP      {R0,R4,R5,PC}    ;; return
    221          
    222          
    223          //确认当前选择的

   \                                 In section .text, align 2, keep-with-next
    224          void var_ok()
    225          {
   \                     var_ok: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    226              ASSERT(new_tab < VAR_MAX);
   \   00000002   0x....             LDR.N    R0,??DataTable11_3
   \   00000004   0x7800             LDRB     R0,[R0, #+0]
   \   00000006   0x2807             CMP      R0,#+7
   \   00000008   0xDB03             BLT.N    ??var_ok_0
   \   0000000A   0x21E2             MOVS     R1,#+226
   \   0000000C   0x....             LDR.N    R0,??DataTable11_1
   \   0000000E   0x.... 0x....      BL       assert_failed
    227          
    228              //比较是否有改变值
    229              if(VAR_VALUE(new_tab) != VAR_OLDVALUE(new_tab))   //值改变了，则需要处理
   \                     ??var_ok_0: (+1)
   \   00000012   0x....             LDR.N    R0,??DataTable11
   \   00000014   0x....             LDR.N    R1,??DataTable11_3
   \   00000016   0x7809             LDRB     R1,[R1, #+0]
   \   00000018   0x2214             MOVS     R2,#+20
   \   0000001A   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   0000001E   0x6800             LDR      R0,[R0, #+0]
   \   00000020   0x....             LDR.N    R1,??DataTable11
   \   00000022   0x....             LDR.N    R2,??DataTable11_3
   \   00000024   0x7812             LDRB     R2,[R2, #+0]
   \   00000026   0x2314             MOVS     R3,#+20
   \   00000028   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   0000002C   0x6849             LDR      R1,[R1, #+4]
   \   0000002E   0x4288             CMP      R0,R1
   \   00000030   0xD003             BEQ.N    ??var_ok_1
    230              {
    231                  var_syn(new_tab);          //同步新的值
   \   00000032   0x....             LDR.N    R0,??DataTable11_3
   \   00000034   0x7800             LDRB     R0,[R0, #+0]
   \   00000036   0x.... 0x....      BL       var_syn
    232              }
    233          
    234              var_display(new_tab);
   \                     ??var_ok_1: (+1)
   \   0000003A   0x....             LDR.N    R0,??DataTable11_3
   \   0000003C   0x7800             LDRB     R0,[R0, #+0]
   \   0000003E   0x.... 0x....      BL       var_display
    235          }
   \   00000042   0xBD01             POP      {R0,PC}          ;; return
    236          
    237          //取消当前选择的值  OK

   \                                 In section .text, align 2, keep-with-next
    238          void val_cancel()
    239          {
   \                     val_cancel: (+1)
   \   00000000   0xB580             PUSH     {R7,LR}
    240              ASSERT(new_tab < VAR_MAX);
   \   00000002   0x....             LDR.N    R0,??DataTable11_3
   \   00000004   0x7800             LDRB     R0,[R0, #+0]
   \   00000006   0x2807             CMP      R0,#+7
   \   00000008   0xDB03             BLT.N    ??val_cancel_0
   \   0000000A   0x21F0             MOVS     R1,#+240
   \   0000000C   0x....             LDR.N    R0,??DataTable11_1
   \   0000000E   0x.... 0x....      BL       assert_failed
    241          
    242              //直接还原当前值
    243              VAR_VALUE(new_tab) = VAR_OLDVALUE(new_tab);
   \                     ??val_cancel_0: (+1)
   \   00000012   0x....             LDR.N    R0,??DataTable11
   \   00000014   0x....             LDR.N    R1,??DataTable11_3
   \   00000016   0x7809             LDRB     R1,[R1, #+0]
   \   00000018   0x2214             MOVS     R2,#+20
   \   0000001A   0xFB02 0x0001      MLA      R0,R2,R1,R0
   \   0000001E   0x6840             LDR      R0,[R0, #+4]
   \   00000020   0x....             LDR.N    R1,??DataTable11
   \   00000022   0x....             LDR.N    R2,??DataTable11_3
   \   00000024   0x7812             LDRB     R2,[R2, #+0]
   \   00000026   0x2314             MOVS     R3,#+20
   \   00000028   0xFB03 0x1102      MLA      R1,R3,R2,R1
   \   0000002C   0x6008             STR      R0,[R1, #+0]
    244          
    245              var_display(new_tab);
   \   0000002E   0x....             LDR.N    R0,??DataTable11_3
   \   00000030   0x7800             LDRB     R0,[R0, #+0]
   \   00000032   0x.... 0x....      BL       var_display
    246          }
   \   00000036   0xBD01             POP      {R0,PC}          ;; return
    247          
    248          
    249          
    250          //显示指定的值。tab 为 VAR_MAX 时表示全部显示，小于则显示对应的
    251          

   \                                 In section .text, align 2, keep-with-next
    252          void var_display(uint8 tab)
    253          {
   \                     var_display: (+1)
   \   00000000   0xB5F0             PUSH     {R4-R7,LR}
   \   00000002   0xB083             SUB      SP,SP,#+12
   \   00000004   0x0004             MOVS     R4,R0
    254          #if UI_VAR_USE_LCD
    255          
    256              //定义背景延时
    257          #define SELECT_NO_CHANGE_BG         WHITE   //当前选中，而且没有改变
    258          #define SELECT_CHANGE_BG            WHITE   //当前选中，而且改变了
    259          #define NO_SELECT_NO_CHANGE_BG      RED     //没有选中，而且没有改变（普通的就是这样）
    260          #define NO_SELECT_CHANGE_BG         RED     //没有选中，而且改变了
    261          
    262              //定义文字颜色
    263          #define SELECT_NO_CHANGE            BLUE    //当前选中，而且没有改变
    264          #define SELECT_CHANGE               GREEN   //当前选中，而且改变了
    265          #define NO_SELECT_NO_CHANGE         BLUE    //没有选中，而且没有改变（普通的就是这样）
    266          #define NO_SELECT_CHANGE            GREEN   //没有选中，而且改变了
    267          
    268              uint8  i = 0;
   \   00000006   0x2500             MOVS     R5,#+0
    269              uint16 bkColor;
    270              uint16 Color;
    271          
    272              ASSERT((new_tab < VAR_MAX) && (tab <= VAR_MAX));
   \   00000008   0x....             LDR.N    R0,??DataTable11_3
   \   0000000A   0x7800             LDRB     R0,[R0, #+0]
   \   0000000C   0x2807             CMP      R0,#+7
   \   0000000E   0xDA02             BGE.N    ??var_display_0
   \   00000010   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000012   0x2C08             CMP      R4,#+8
   \   00000014   0xDB04             BLT.N    ??var_display_1
   \                     ??var_display_0: (+1)
   \   00000016   0xF44F 0x7188      MOV      R1,#+272
   \   0000001A   0x....             LDR.N    R0,??DataTable11_1
   \   0000001C   0x.... 0x....      BL       assert_failed
    273          
    274              if(tab == VAR_MAX)      //显示全部
   \                     ??var_display_1: (+1)
   \   00000020   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000022   0x2C07             CMP      R4,#+7
   \   00000024   0xD103             BNE.N    ??var_display_2
    275              {
    276                  i = VAR_MAX - 1;    //循环的次数
   \   00000026   0x2006             MOVS     R0,#+6
   \   00000028   0x0005             MOVS     R5,R0
    277                  tab = 0;
   \   0000002A   0x2000             MOVS     R0,#+0
   \   0000002C   0x0004             MOVS     R4,R0
    278              }
    279          
    280              do
    281              {
    282                  if(tab == new_tab)
   \                     ??var_display_2: (+1)
   \   0000002E   0x....             LDR.N    R0,??DataTable11_3
   \   00000030   0x7800             LDRB     R0,[R0, #+0]
   \   00000032   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000034   0x4284             CMP      R4,R0
   \   00000036   0xD11A             BNE.N    ??var_display_3
    283                  {
    284                      //显示当前的值：判断值是否改变
    285                      if(VAR_VALUE(tab) == VAR_OLDVALUE(tab)) //值没改变，不需要处理
   \   00000038   0x....             LDR.N    R0,??DataTable11
   \   0000003A   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000003C   0x2114             MOVS     R1,#+20
   \   0000003E   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   00000042   0x6800             LDR      R0,[R0, #+0]
   \   00000044   0x....             LDR.N    R1,??DataTable11
   \   00000046   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000048   0x2214             MOVS     R2,#+20
   \   0000004A   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   0000004E   0x6849             LDR      R1,[R1, #+4]
   \   00000050   0x4288             CMP      R0,R1
   \   00000052   0xD105             BNE.N    ??var_display_4
    286                      {
    287                          Color   =  SELECT_NO_CHANGE;
   \   00000054   0x201F             MOVS     R0,#+31
   \   00000056   0x0007             MOVS     R7,R0
    288                          bkColor =  SELECT_NO_CHANGE_BG;
   \   00000058   0xF64F 0x70FF      MOVW     R0,#+65535
   \   0000005C   0x0006             MOVS     R6,R0
   \   0000005E   0xE020             B.N      ??var_display_5
    289                      }
    290                      else
    291                      {
    292                          Color   =  SELECT_CHANGE;
   \                     ??var_display_4: (+1)
   \   00000060   0xF44F 0x60FC      MOV      R0,#+2016
   \   00000064   0x0007             MOVS     R7,R0
    293                          bkColor =  SELECT_CHANGE_BG;
   \   00000066   0xF64F 0x70FF      MOVW     R0,#+65535
   \   0000006A   0x0006             MOVS     R6,R0
   \   0000006C   0xE019             B.N      ??var_display_5
    294                      }
    295                  }
    296                  else
    297                  {
    298                      //显示非当前的值
    299                      if(VAR_VALUE(tab) == VAR_OLDVALUE(tab)) //值没改变，不需要处理
   \                     ??var_display_3: (+1)
   \   0000006E   0x....             LDR.N    R0,??DataTable11
   \   00000070   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000072   0x2114             MOVS     R1,#+20
   \   00000074   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   00000078   0x6800             LDR      R0,[R0, #+0]
   \   0000007A   0x....             LDR.N    R1,??DataTable11
   \   0000007C   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000007E   0x2214             MOVS     R2,#+20
   \   00000080   0xFB02 0x1104      MLA      R1,R2,R4,R1
   \   00000084   0x6849             LDR      R1,[R1, #+4]
   \   00000086   0x4288             CMP      R0,R1
   \   00000088   0xD105             BNE.N    ??var_display_6
    300                      {
    301                          Color   =  NO_SELECT_NO_CHANGE;
   \   0000008A   0x201F             MOVS     R0,#+31
   \   0000008C   0x0007             MOVS     R7,R0
    302                          bkColor =  NO_SELECT_NO_CHANGE_BG;
   \   0000008E   0xF44F 0x4078      MOV      R0,#+63488
   \   00000092   0x0006             MOVS     R6,R0
   \   00000094   0xE005             B.N      ??var_display_5
    303          
    304                      }
    305                      else
    306                      {
    307                          Color   =  NO_SELECT_CHANGE;
   \                     ??var_display_6: (+1)
   \   00000096   0xF44F 0x60FC      MOV      R0,#+2016
   \   0000009A   0x0007             MOVS     R7,R0
    308                          bkColor =  NO_SELECT_CHANGE_BG;
   \   0000009C   0xF44F 0x4078      MOV      R0,#+63488
   \   000000A0   0x0006             MOVS     R6,R0
   \                     ??var_display_5: (+1)
   \   000000A2   0x....             LDR.N    R0,??DataTable11
   \   000000A4   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   000000A6   0x2114             MOVS     R1,#+20
   \   000000A8   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   000000AC   0x6900             LDR      R0,[R0, #+16]
   \   000000AE   0x9001             STR      R0,[SP, #+4]
    309                      }
    310                  }
    311          
    312                  //显示文字
    313                  LCD_num_C(VAR_SITE(tab), VAR_VALUE(tab), Color, bkColor);
   \   000000B0   0x0030             MOVS     R0,R6
   \   000000B2   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   000000B4   0x9000             STR      R0,[SP, #+0]
   \   000000B6   0x003B             MOVS     R3,R7
   \   000000B8   0xB29B             UXTH     R3,R3            ;; ZeroExt  R3,R3,#+16,#+16
   \   000000BA   0x2205             MOVS     R2,#+5
   \   000000BC   0x....             LDR.N    R0,??DataTable11
   \   000000BE   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   000000C0   0x2114             MOVS     R1,#+20
   \   000000C2   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   000000C6   0x6801             LDR      R1,[R0, #+0]
   \   000000C8   0x9801             LDR      R0,[SP, #+4]
   \   000000CA   0x.... 0x....      BL       LCD_num_BC
    314          
    315                  tab++;
   \   000000CE   0x1C64             ADDS     R4,R4,#+1
    316              }
    317              while(i--);         //tab != VAR_MAX 的时候，执行一次就跳出
   \   000000D0   0x0028             MOVS     R0,R5
   \   000000D2   0x1E45             SUBS     R5,R0,#+1
   \   000000D4   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   000000D6   0x2800             CMP      R0,#+0
   \   000000D8   0xD1A9             BNE.N    ??var_display_2
    318          #else
    319              tab = tab;          //消除编译警告
    320          #endif
    321          }
   \   000000DA   0xBDF7             POP      {R0-R2,R4-R7,PC}  ;; return
    322          

   \                                 In section .text, align 2, keep-with-next
    323          void save_var2buff(var_tab_e var_num, uint8 *sendbuf)
    324          {
   \                     save_var2buff: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
   \   00000004   0x000D             MOVS     R5,R1
    325              uint32 temp;
    326              get_var(var_num, &temp);
   \   00000006   0xA900             ADD      R1,SP,#+0
   \   00000008   0x0020             MOVS     R0,R4
   \   0000000A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000C   0x.... 0x....      BL       get_var
    327              *((uint32 *)&sendbuf[COM_LEN]) = (uint32)var_num;
   \   00000010   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000012   0xF8C5 0x4002      STR      R4,[R5, #+2]
    328              *((uint32 *)&sendbuf[COM_LEN + sizeof(uint32)]) = temp;
   \   00000016   0x9800             LDR      R0,[SP, #+0]
   \   00000018   0xF8C5 0x0006      STR      R0,[R5, #+6]
    329          }
   \   0000001C   0xBD31             POP      {R0,R4,R5,PC}    ;; return
    330          
    331          //同步指定的值。tab 为 VAR_MAX 时表示全部同步，小于则同步对应的

   \                                 In section .text, align 2, keep-with-next
    332          uint8 var_syn(uint8 tab)
    333          {
   \                     var_syn: (+1)
   \   00000000   0xB570             PUSH     {R4-R6,LR}
   \   00000002   0xB088             SUB      SP,SP,#+32
   \   00000004   0x0004             MOVS     R4,R0
    334              ASSERT((new_tab < VAR_MAX) && (tab <= VAR_MAX));
   \   00000006   0x....             LDR.N    R0,??DataTable11_3
   \   00000008   0x7800             LDRB     R0,[R0, #+0]
   \   0000000A   0x2807             CMP      R0,#+7
   \   0000000C   0xDA02             BGE.N    ??var_syn_0
   \   0000000E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000010   0x2C08             CMP      R4,#+8
   \   00000012   0xDB04             BLT.N    ??var_syn_1
   \                     ??var_syn_0: (+1)
   \   00000014   0xF44F 0x71A7      MOV      R1,#+334
   \   00000018   0x....             LDR.N    R0,??DataTable11_1
   \   0000001A   0x.... 0x....      BL       assert_failed
    335          
    336              uint8  i = 0;
   \                     ??var_syn_1: (+1)
   \   0000001E   0x2500             MOVS     R5,#+0
    337              uint8 tempbuff[DATA_PACKET];
    338              uint32 oldvalue;
    339          
    340              if(tab == VAR_MAX)
   \   00000020   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000022   0x2C07             CMP      R4,#+7
   \   00000024   0xD103             BNE.N    ??var_syn_2
    341              {
    342                  i = VAR_MAX - 1;
   \   00000026   0x2006             MOVS     R0,#+6
   \   00000028   0x0005             MOVS     R5,R0
    343                  tab = 0;
   \   0000002A   0x2000             MOVS     R0,#+0
   \   0000002C   0x0004             MOVS     R4,R0
    344              }
    345          
    346              do
    347              {
    348                  oldvalue = VAR_OLDVALUE(tab);                   //备份旧的值
   \                     ??var_syn_2: (+1)
   \   0000002E   0x....             LDR.N    R0,??DataTable11
   \   00000030   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000032   0x2114             MOVS     R1,#+20
   \   00000034   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   00000038   0x6840             LDR      R0,[R0, #+4]
   \   0000003A   0x0006             MOVS     R6,R0
    349          
    350                  //把值复制到对应的变量
    351                  save_var((var_tab_e)tab, VAR_VALUE(tab));
   \   0000003C   0x....             LDR.N    R0,??DataTable11
   \   0000003E   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000040   0x2114             MOVS     R1,#+20
   \   00000042   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   00000046   0x6801             LDR      R1,[R0, #+0]
   \   00000048   0x0020             MOVS     R0,R4
   \   0000004A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000004C   0x.... 0x....      BL       save_var
    352          
    353                  //发送新的值
    354                  save_var2buff((var_tab_e)tab, tempbuff);        //把变量写进 tempbuff 里
   \   00000050   0xA900             ADD      R1,SP,#+0
   \   00000052   0x0020             MOVS     R0,R4
   \   00000054   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000056   0x.... 0x....      BL       save_var2buff
    355                  nrf_msg_tx(COM_VAR, tempbuff);                //发送数据
   \   0000005A   0xA900             ADD      R1,SP,#+0
   \   0000005C   0x2002             MOVS     R0,#+2
   \   0000005E   0x.... 0x....      BL       nrf_msg_tx
    356          
    357                  while(nrf_tx_state() == NRF_TXING);             //等待发送完成
   \                     ??var_syn_3: (+1)
   \   00000062   0x.... 0x....      BL       nrf_tx_state
   \   00000066   0x2800             CMP      R0,#+0
   \   00000068   0xD0FB             BEQ.N    ??var_syn_3
    358          
    359                  if(NRF_TX_ERROR == nrf_tx_state())             //发送失败
   \   0000006A   0x.... 0x....      BL       nrf_tx_state
   \   0000006E   0x2801             CMP      R0,#+1
   \   00000070   0xD107             BNE.N    ??var_syn_4
    360                  {
    361                      VAR_OLDVALUE(tab) = oldvalue;               //还原旧的值
   \   00000072   0x....             LDR.N    R0,??DataTable11
   \   00000074   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000076   0x2114             MOVS     R1,#+20
   \   00000078   0xFB01 0x0004      MLA      R0,R1,R4,R0
   \   0000007C   0x6046             STR      R6,[R0, #+4]
    362          
    363                      //放弃同步
    364                      return 0;
   \   0000007E   0x2000             MOVS     R0,#+0
   \   00000080   0xE006             B.N      ??var_syn_5
    365                  }
    366                  tab++;
   \                     ??var_syn_4: (+1)
   \   00000082   0x1C64             ADDS     R4,R4,#+1
    367              }
    368              while(i--);
   \   00000084   0x0028             MOVS     R0,R5
   \   00000086   0x1E45             SUBS     R5,R0,#+1
   \   00000088   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000008A   0x2800             CMP      R0,#+0
   \   0000008C   0xD1CF             BNE.N    ??var_syn_2
    369          
    370              return 1;
   \   0000008E   0x2001             MOVS     R0,#+1
   \                     ??var_syn_5: (+1)
   \   00000090   0xB008             ADD      SP,SP,#+32
   \   00000092   0xBD70             POP      {R4-R6,PC}       ;; return
    371          }
    372          

   \                                 In section .text, align 2, keep-with-next
    373          uint8    car_ctrl_get()
    374          {
    375              return  car_ctrl;
   \                     car_ctrl_get: (+1)
   \   00000000   0x....             LDR.N    R0,??DataTable11_4
   \   00000002   0x7800             LDRB     R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    376          }
    377          
    378          
    379          //车状态控制

   \                                 In section .text, align 2, keep-with-next
    380          uint8 car_ctrl_syn(CAR_CTRL_MODE_e mode)
    381          {
   \                     car_ctrl_syn: (+1)
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    382              uint8 ret;
    383              ASSERT(mode < CAR_CTRL_MAX);
   \   00000004   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000006   0x2C0B             CMP      R4,#+11
   \   00000008   0xDB04             BLT.N    ??car_ctrl_syn_0
   \   0000000A   0xF240 0x117F      MOVW     R1,#+383
   \   0000000E   0x....             LDR.N    R0,??DataTable11_1
   \   00000010   0x.... 0x....      BL       assert_failed
    384          
    385              VAR_VALUE(CAR_CTRL) =  mode;
   \                     ??car_ctrl_syn_0: (+1)
   \   00000014   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000016   0x....             LDR.N    R0,??DataTable11
   \   00000018   0x6004             STR      R4,[R0, #+0]
    386          
    387              ret =  var_syn(CAR_CTRL);
   \   0000001A   0x2000             MOVS     R0,#+0
   \   0000001C   0x.... 0x....      BL       var_syn
   \   00000020   0x0005             MOVS     R5,R0
    388          
    389              var_display(CAR_CTRL);
   \   00000022   0x2000             MOVS     R0,#+0
   \   00000024   0x.... 0x....      BL       var_display
    390          
    391              return ret;
   \   00000028   0x0028             MOVS     R0,R5
   \   0000002A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000002C   0xBD32             POP      {R1,R4,R5,PC}    ;; return
    392          };

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   0x........         DC32     num_info

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_1:
   \   00000000   0x........         DC32     ?_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_2:
   \   00000000   0x........         DC32     var_addr

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_3:
   \   00000000   0x........         DC32     new_tab

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable11_4:
   \   00000000   0x........         DC32     car_ctrl

   \                                 In section .rodata, align 4
   \                     ?_0:
   \   00000000   0x44 0x3A          DC8 44H, 3AH, 5CH, 53H, 74H, 75H, 64H, 79H
   \              0x5C 0x53    
   \              0x74 0x75    
   \              0x64 0x79    
   \   00000008   0x5C 0x32          DC8 5CH, 32H, 30H, 31H, 36H, 0B5H, 0E7H, 0D7H
   \              0x30 0x31    
   \              0x36 0xB5    
   \              0xE7 0xD7    
   \   00000010   0xD3 0xC9          DC8 0D3H, 0C9H, 0E8H, 0BCH, 0C6H, 0B4H, 0F3H, 0C8H
   \              0xE8 0xBC    
   \              0xC6 0xB4    
   \              0xF3 0xC8    
   \   00000018   0xFC 0x5C          DC8 0FCH, 5CH, 54H, 69H, 5CH, 0B5H, 0E7H, 0C8H
   \              0x54 0x69    
   \              0x5C 0xB5    
   \              0xE7 0xC8    
   \   00000020   0xFC 0xB1          DC8 0FCH, 0B1H, 0B8H, 0D3H, 0C3H, 0B5H, 0D7H, 0B2H
   \              0xB8 0xD3    
   \              0xC3 0xB5    
   \              0xD7 0xB2    
   \   00000028   0xE3 0x5C          DC8 0E3H, 5CH, 42H, 6FH, 61H, 72H, 64H, 5CH
   \              0x42 0x6F    
   \              0x61 0x72    
   \              0x64 0x5C    
   \   00000030   0x73 0x72          DC8 73H, 72H, 63H, 5CH, 56H, 43H, 41H, 4EH
   \              0x63 0x5C    
   \              0x56 0x43    
   \              0x41 0x4E    
   \   00000038   0x5F 0x55          DC8 5FH, 55H, 49H, 5FH, 56H, 41H, 52H, 2EH
   \              0x49 0x5F    
   \              0x56 0x41    
   \              0x52 0x2E    
   \   00000040   0x63 0x00          DC8 63H, 0
   \   00000042   0x00 0x00          DC8 0, 0
    393          
    394          
    395          

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   car_ctrl_get
      16   car_ctrl_syn
        16   -> assert_failed
        16   -> var_display
        16   -> var_syn
       0   get_var
       0   save_var
      16   save_var2buff
        16   -> get_var
      16   updata_var
        16   -> get_var
       8   val_cancel
         8   -> assert_failed
         8   -> var_display
      32   var_display
        32   -> LCD_num_BC
        32   -> assert_failed
      16   var_init
        16   -> assert_failed
        16   -> get_var
       8   var_ok
         8   -> assert_failed
         8   -> var_display
         8   -> var_syn
      16   var_select
        16   -> assert_failed
        16   -> var_display
      48   var_syn
        48   -> assert_failed
        48   -> nrf_msg_tx
        48   -> nrf_tx_state
        48   -> save_var
        48   -> save_var2buff
       8   var_value
         8   -> assert_failed
         8   -> var_display


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable11
       4  ??DataTable11_1
       4  ??DataTable11_2
       4  ??DataTable11_3
       4  ??DataTable11_4
      68  ?_0
       1  car_ctrl
       6  car_ctrl_get
      46  car_ctrl_syn
      66  get_var
       4  last_tab
       1  new_tab
     140  num_info
      88  save_var
      30  save_var2buff
      34  updata_var
      56  val_cancel
      28  var_addr
     220  var_display
     104  var_init
      68  var_ok
     166  var_select
     148  var_syn
     522  var_value

 
     6 bytes in section .bss
   168 bytes in section .data
    68 bytes in section .rodata
 1 574 bytes in section .text
 
 1 574 bytes of CODE  memory
    68 bytes of CONST memory
   174 bytes of DATA  memory

Errors: none
Warnings: none
